% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/stars.R
\name{rod}
\alias{rod}
\alias{rod,numeric-method}
\alias{rod,FLQuant-method}
\title{Generic Function for Regime Shift Detection}
\usage{
rod(object, year = NULL, n = 10, sig = 1.68, plot = FALSE, ...)

\S4method{rod}{numeric}(object, year = NULL, n = 10, sig = 1.68, plot = FALSE, ...)

\S4method{rod}{FLQuant}(object, year = NULL, n = 10, sig = 1.68, plot = FALSE, ...)
}
\arguments{
\item{object}{An \code{FLQuant} object containing time series data}

\item{year}{Optional numeric vector of years. If NULL (default), years are
extracted from the FLQuant object dimensions}

\item{n}{Numeric. Minimum assumed regime length (default: 10)}

\item{sig}{Numeric. Significance level based on t-distribution (default: 1.68)}

\item{plot}{Logical. If TRUE, plots the time series with regime polygons
overlaid (default: FALSE)}

\item{...}{Additional arguments (currently unused)}
}
\value{
A data.frame with regime shift information

A data.frame with regime shift information, structured for plotting
  with ggplot2. Contains columns: \code{regime}, \code{data}, \code{year}.

A data.frame with regime shift information, structured for plotting
  with ggplot2. Contains columns: \code{regime}, \code{data}, \code{year},
  and \code{iter} (iteration number from FLQuant).
}
\description{
Generic function for detecting regime shifts in time series data using the
STARS algorithm (Rodionov 2004) as modified by Szuwalski et al.

S4 method for detecting regime shifts in numeric vectors. This method
provides the same interface and defaults as the FLQuant method, ensuring
consistency across different input types.

S4 method for detecting regime shifts in \code{FLQuant} objects from the
FLCore package. This method applies \code{rodFn} to each iteration of the
FLQuant object separately, using the same default parameters as the numeric method.
}
\details{
This method calls \code{rodFn} internally with the same default parameters
as the FLQuant method, ensuring consistent behavior across different input types.

Evidence for regime shifts are explored using a sequential t-test algorithm
(STARS; Rodionov 2004) as modified by Szuwalski et al. (submitted).

The function processes each iteration of the FLQuant object separately,
allowing for regime shift detection across multiple Monte Carlo iterations
or scenarios. The default parameters (n=10, sig=1.68, plot=FALSE) match those
of the numeric method for consistency.
}
\examples{
\dontrun{
# Create example time series with regime shifts
set.seed(123)
val <- c(rnorm(12, 0, 0.5), rnorm(12, 1, 0.5), rnorm(12, 0, 0.5))
years <- 1980:(1980 + length(val) - 1)

# Detect regime shifts using rod method
regimes <- rod(val, year = years)

# Plot with ggplot2
library(ggplot2)
df <- data.frame(year = years, data = val)
ggplot(df, aes(x = year, y = data)) +
  geom_polygon(aes(year, data, group = regime),
               fill = "lavender", col = "blue",
               lwd = 0.25, data = regimes, alpha = 0.75) +
  geom_point() +
  geom_line()
}

\dontrun{
library(FLCore)

# Create example FLQuant with regime shifts
object <- FLQuant(rlnorm(1, FLQuant(0, dimnames = list(year = 1:30)), 0.3))

# Detect regime shifts (uses same defaults as numeric method)
regimes <- rod(object)

# Plot with ggplot2
library(ggplot2)
ggplot(as.data.frame(object)) +
  geom_polygon(aes(year, data, group = regime),
               fill = "lavender", col = "blue",
               lwd = 0.25, data = regimes, alpha = 0.75) +
  geom_point(aes(year, data)) +
  geom_line(aes(year, data))
}

}
\references{
Rodionov, S. N. (2004). A sequential algorithm for testing climate regime
shifts. Geophysical Research Letters, 31(9), L09204.
}
\seealso{
\code{\link{rodFn}} for the base function, \code{\link{rod,numeric-method}}
  for numeric method, \code{\link{rod,FLQuant-method}} for FLQuant method
}
