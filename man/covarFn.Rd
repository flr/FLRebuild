% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/covar_fn.R
\name{covarFn}
\alias{covarFn}
\title{Calculate Life History and Demographic Covariates}
\usage{
covarFn(
  object,
  fbar = as.FLQuant(refpts(object)["msy", "harvest", drop = T]),
  model = "bevholt"
)
}
\arguments{
\item{object}{An FLBRP object containing stock assessment information and life history data}

\item{fbar}{An FLQuant specifying fishing mortality. Default is MSY harvest rate from reference points.}

\item{model}{Character string specifying the stock-recruitment model type. 
Options: "bevholt" (default) or "ricker". Used for calculating steepness.}
}
\value{
A named numeric vector containing life history and demographic covariates:
  
**Weight and Age Metrics:**
  \item{swt}{Mean spawner weight-at-age (weighted by spawning stock numbers and maturity)}
  \item{cwt}{Mean catch weight (weighted by catch numbers)}
  \item{ssbAge}{Age at which spawning stock biomass contribution is maximized (apex age)}
  \item{ctcAge}{Age at which catch biomass contribution is maximized}
  
**Timing and Selectivity:**
  \item{m.spwn}{Logical - whether natural mortality before spawning is non-zero}
  \item{harvest.spwn}{Logical - whether fishing mortality before spawning is non-zero}
  \item{wts}{Mean absolute relative difference between catch and stock weights}
  \item{ks}{Kolmogorov-Smirnov test statistic comparing selectivity and maturity schedules}
  \item{matsel}{Area between selectivity and maturity curves (using ECDF comparison)}
  \item{abiSSB}{Area between ABI (aggregate biomass index) and SSB age distributions}
  
**Productivity and Reference Points:**
  \item{spr0}{Spawning potential ratio at unfished conditions}
  \item{shape}{Production function shape (ratio of B_MSY to virgin biomass)}
  \item{s}{Steepness parameter of the stock-recruitment relationship}
  \item{pe}{Process error - standard deviation of recruitment residuals. Measures variability in stock-recruitment relationship}
  
**Demographic Parameters (from leslieFn):**
  \item{damp}{Damping ratio from Leslie matrix eigenvalues}
  \item{r}{Intrinsic population growth rate}
  \item{gt}{Generation time (mean age of reproduction)}
  \item{r0}{Net reproductive rate}
}
\description{
This function computes a comprehensive set of life history traits and demographic
parameters from an FLBRP object, useful for comparative analyses and building
statistical models of population dynamics and rebuilding capacity.
}
\details{
The function performs multiple calculations:

1. **Apex ages**: Identifies ages contributing most to catch and SSB
2. **Mean weights**: Calculates abundance-weighted mean weights for spawners and catch
3. **Selectivity-maturity comparison**: Uses ECDF (empirical cumulative distribution function)
   to quantify differences between selectivity and maturity patterns
4. **ABI-SSB comparison**: Compares age distributions based on aggregate biomass index
   versus spawning stock biomass contributions
5. **Demographic properties**: Calls leslieFn() to compute Leslie matrix-based metrics

The metrics are useful for:
- Comparative life history analysis across species/stocks
- Building statistical models of rebuild time and recovery capacity
- Understanding relationships between life history and productivity
- Identifying key biological traits affecting management outcomes
- Quantifying uncertainty in stock-recruitment relationships via process error
}
\examples{
\dontrun{
# Calculate covariates at MSY fishing mortality
covars <- covarFn(brp_object)

# Calculate for Ricker stock-recruitment relationship
covars <- covarFn(brp_object, model = "ricker")

# Calculate at different fishing mortality
covars <- covarFn(brp_object, fbar = as.FLQuant(0.3))

# Use in comparative analysis across multiple stocks
covar_list <- lapply(stock_list, covarFn)
covar_df <- do.call(rbind, covar_list)
}

}
\references{
Kolmogorov-Smirnov test for comparing distributions
}
\seealso{
\code{\link{leslieFn}} for Leslie matrix demographic calculations
}
