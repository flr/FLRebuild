% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/jabbaDiagnostics.R
\name{jabbaDiagnostics}
\alias{jabbaDiagnostics}
\alias{jabbaDiagnostics,list-method}
\title{Run Diagnostics on JABBA Model Fits}
\usage{
jabbaDiagnostics(fit, id = NULL, scenario = NULL, ...)

\S4method{jabbaDiagnostics}{list}(fit, id = NULL, scenario = NULL, ...)
}
\arguments{
\item{fit}{A JABBA fit object (list with $fit element containing the JABBA model)}

\item{id}{Character. Identifier for the stock/model (optional, for tracking)}

\item{scenario}{Character. Scenario identifier (optional, for tracking)}

\item{...}{Additional arguments (currently unused)}
}
\value{
A data.frame with diagnostic results containing:
  \item{Stock}{Stock identifier (if provided)}
  \item{Scenario}{Scenario identifier (if provided)}
  \item{Geweke_passed}{Logical. Whether Geweke convergence test passed (all p > 0.05)}
  \item{Geweke_mean}{Numeric. Mean Geweke p-value}
  \item{Heidel_passed}{Logical. Whether Heidelberger-Welch test passed (all p > 0.05)}
  \item{Heidel_mean}{Numeric. Mean Heidel p-value}
  \item{n_residuals}{Integer. Number of residuals}
  \item{mean_residual}{Numeric. Mean residual value}
  \item{sd_residual}{Numeric. Standard deviation of residuals}
  \item{Normality_passed}{Logical. Whether residuals pass normality test (Shapiro-Wilk, p > 0.05)}
  \item{Normality_p}{Numeric. Shapiro-Wilk p-value}
  \item{Autocorr_passed}{Logical. Whether residuals pass autocorrelation test (Ljung-Box, p > 0.05)}
  \item{Autocorr_p}{Numeric. Ljung-Box p-value}
  \item{Runs_passed}{Logical. Whether runs test passed (p > 0.05)}
  \item{Runs_p}{Numeric. Runs test p-value}
  \item{Bias_passed}{Logical. Whether mean residual bias is acceptable (|mean| < 0.1)}
  \item{BBmsy_terminal}{Numeric. Terminal B/Bmsy ratio}
  \item{FFmsy_terminal}{Numeric. Terminal F/Fmsy ratio}
}
\description{
Generic function to run comprehensive diagnostics on JABBA (Just Another
Bayesian Biomass Assessment) model fits. This includes convergence tests,
residual diagnostics, and parameter estimates. The function is designed to
work with single fits or lists of fits.
}
\details{
This function performs three categories of diagnostics:

\strong{1. Convergence Diagnostics:}
\itemize{
  \item \strong{Geweke test:} Tests for convergence of MCMC chains
  \item \strong{Heidelberger-Welch test:} Tests for stationarity of MCMC chains
}

\strong{2. Residual Diagnostics:}
\itemize{
  \item \strong{Normality:} Shapiro-Wilk test for residual normality (n between 3-5000)
  \item \strong{Autocorrelation:} Ljung-Box test for residual autocorrelation (lag=5)
  \item \strong{Runs test:} Tests for randomness in residual sequence (if jbrunstest available)
  \item \strong{Bias:} Checks if mean residual is close to zero (|mean| < 0.1)
}

\strong{3. Parameter Estimates:}
\itemize{
  \item Terminal B/Bmsy and F/Fmsy from kobe matrix
}

The function handles missing data gracefully, returning NA for tests that
cannot be performed.
}
\examples{
\dontrun{
# Single JABBA fit
diagnostics <- jabbaDiagnostics(jabba_fit, id = "cod.27.47d20", scenario = "EBiomass")

# List of fits (nested structure: fits[[stock]][[scenario]])
fits <- list(
  stock1 = list(scenario1 = list(fit = jabba_fit1)),
  stock2 = list(scenario2 = list(fit = jabba_fit2))
)
all_diagnostics <- jabbaDiagnostics(fits)
}

}
\seealso{
\code{\link{shapiro.test}}, \code{\link{Box.test}} for statistical tests,
\code{\link{summarizeDiagnostics}} for summarizing results across fits
}
