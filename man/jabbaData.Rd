% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/jabba-wrapper.R
\name{jabbaData}
\alias{jabbaData}
\title{Prepare Data for JABBA Model Fitting}
\usage{
jabbaData(id, icesdata, ctc1903 = NULL, indices = NULL)
}
\arguments{
\item{id}{Character string. Stock identifier matching a name in \code{icesdata}}

\item{icesdata}{A list of ICES stock assessment objects (typically FLStock
or similar objects) with names corresponding to stock IDs}

\item{ctc1903}{Optional data.frame. Historical catch data (1903 onwards)
with columns: \code{.id}, \code{year}, and \code{catch}. If provided,
replaces standard catch data for years where available.}

\item{indices}{Optional data.frame. Survey indices with columns: \code{.id},
\code{year}, \code{survey}, and \code{data}. Multiple surveys are supported
and will be cast to wide format (one column per survey).}
}
\value{
A data.frame with columns:
  \itemize{
    \item \code{year}: Year
    \item \code{catch}: Catch data (missing or zero values replaced with small positive value)
    \item \code{index}: Estimated biomass index (ebiomass)
    \item \code{ffmsy}: Fishing mortality relative to FMSY
    \item Additional columns for each survey (if \code{indices} provided)
  }
}
\description{
Extracts and formats time series data from ICES stock assessment objects
for use in JABBA (Just Another Bayesian Biomass Assessment) models.
This function prepares catch, biomass index, and fishing mortality data,
with optional support for historical catch data and survey indices.
}
\details{
The function performs several data preparation steps:
\itemize{
  \item Extracts catch time series and replaces missing/zero values with
    a small positive value (1e-6 times mean catch)
  \item Extracts estimated biomass index (ebiomass) from time series
  \item Calculates F/FMSY from fishing mortality and FMSY reference point
  \item Optionally merges historical catch data (1903+) if provided
  \item Optionally adds survey indices, casting to wide format with one
    column per survey name
}

Missing catch values are replaced to ensure JABBA models can run, as JABBA
requires positive catch values for all years in the time series.
}
\examples{
\dontrun{
# Basic usage with ICES data
data <- jabbaData("cod.27.47d20", icesdata)

# With historical catch data
data <- jabbaData("cod.27.47d20", icesdata, ctc1903 = historical_catch)

# With survey indices
data <- jabbaData("cod.27.47d20", icesdata, indices = survey_data)

# Full example
data <- jabbaData("cod.27.47d20", icesdata, 
                  ctc1903 = historical_catch, 
                  indices = survey_data)
}

}
\seealso{
\code{\link{jabba}}, \code{\link{jabbaPriors}}
}
